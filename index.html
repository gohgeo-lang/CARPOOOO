<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CARPOOOO</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link href="style.css" rel="stylesheet">
</head>

<style>
    /* 사이드 메뉴 */
    .side-menu {
        position: fixed;
        top: 0;
        left: -280px;
        width: 280px;
        height: 100%;
        background: #fff;
        box-shadow: 2px 0 5px rgba(0, 0, 0, .2);
        transition: left 0.3s ease;
        padding: 20px;
        z-index: 2000;
        overflow-y: auto;
    }

    .side-menu.active {
        left: 0;
    }

    /* 사이드 메뉴 제목 */
    .side-menu p {
        text-align: left;
        color: #000;
        font-weight: bold;
        margin: 20px 0 10px;
        /* 여백 넉넉하게 */
    }

    /* 사이드 메뉴 상단 */
    .side-menu .menu-header {
        text-align: center;
    }

    .side-menu .menu-header h5 {
        color: #0d6efd;
        font-size: 1.25rem;
        margin-bottom: 10px;
    }

    /* 사이드 메뉴 리스트 */
    .side-menu .menu-list,
    .side-menu .menu-policy ul {
        list-style: none;
        padding-left: 0;
    }

    .side-menu .menu-list li,
    .side-menu .menu-policy li {
        margin: 10px 0;
    }

    .side-menu a {
        text-decoration: none;
        color: #333;
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .side-menu a:hover {
        color: #0d6efd;
    }

    /* 오버레이 */
    .overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.3);
        z-index: 1500;
    }

    .overlay.active {
        display: block;
    }
</style>


<body>

    <!-- 상단 헤더 -->
    <div class="header">
        <div class="d-flex justify-content-between align-items-center mb-2">
            <!-- 햄버거 버튼 -->
            <button id="menuBtn" class="btn btn-sm btn-light"><i class="bi bi-list"></i></button>
            <!-- 사이드메뉴 -->
            <div id="sideMenu" class="side-menu">
                <div class="menu-header">
                    <h5 class="fw-bold">CARPOOOO</h5>
                </div>
                <hr>

                <!-- 서비스메뉴 -->
                <p class="fw-bold small text-muted mb-1">서비스</p>

                <ul class="menu-list">
                    <li><a href="car-profile.html"><i class="bi bi-car-front-fill"></i> 내 차</a></li>
                    <li><a href="booking.html"><i class="bi bi-calendar-event"></i> 예약하기</a></li>
                    <li><a href="mypage.html#tickets"><i class="bi bi-ticket-perforated-fill"></i> 보관함</a></li>
                    <li><a href="mypage.html#history"><i class="bi bi-clock-history"></i> 히스토리</a></li>
                    <li><a href="event.html"><i class="bi bi-gift-fill"></i> 이벤트</a></li>
                    <li><a href="support.html"><i class="bi bi-headset"></i> 1:1 문의</a></li>
                </ul>

                <hr>

                <!-- 약관 및 정책 -->
                <div class="menu-policy">
                    <p class="fw-bold small text-muted mb-1">약관 및 정책</p>
                    <ul>
                        <li><a href="terms.html">이용약관</a></li>
                        <li><a href="privacy.html">개인정보 처리방침</a></li>
                        <li><a href="finance-terms.html">카푸 전자금융거래 이용약관(선불)</a></li>
                        <li><a href="location-terms.html">위치기반 서비스 이용약관</a></li>
                        <li><a href="location-privacy.html">개인위치정보 처리방침</a></li>
                    </ul>
                </div>
            </div>
            <div class="text-center flex-grow-1">
                <h4 class="m-0 fw-bold">CARPOOOO</h4>
                <p class="mt-1 mb-0 small text-light">당신의 차를 위한 스마트 케어</p>
            </div>
            <!-- 알림창 -->
            <button class="btn btn-sm btn-light"><i class="bi bi-bell"></i></button>
        </div>

        <!-- 로그인 상태 영역 -->
        <div id="userStatus" class="mt-4"></div>

        <div class="search-bar mt-3"><i class="bi bi-search"></i> 내 차를 반짝이게 해보세요</div>
    </div>
    <!-- 오버레이 -->
    <div id="overlay" class="overlay"></div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const userStatus = document.getElementById("userStatus");
            const currentUser = JSON.parse(localStorage.getItem("currentUser"));

            if (currentUser) {
                // 로그인 된 상태
                userStatus.innerHTML = `
        <div class="d-flex justify-content-between align-items-center">
          <span>
            <strong>${currentUser.name}</strong>님 환영합니다! | 
            리워드: <span class="fw-bold text-warning">0P</span>
          </span>
        </div>
    `;
            }
            else {
                // 비로그인 상태
                userStatus.innerHTML = `
        <div class="text-center">
          <a href="login.html" class="text-light text-decoration-none fw-light">
            로그인하고 더 많은 서비스를 이용해보세요
          </a>
        </div>
      `;
            }

        });
    </script>

    <!-- 퀵메뉴 -->
    <div class="quick-menu">
        <div class="quick-item" onclick="goMyCar()">
            <i class="bi bi-car-front-fill"></i>내 차
        </div>
        <div class="quick-item" onclick="location.href='booking.html'">
            <i class="bi bi-calendar-event"></i>예약하기
        </div>
        <div class="quick-item" onclick="location.href='mypage.html#tickets'">
            <i class="bi bi-ticket-perforated-fill"></i>보관함
        </div>
        <div class="quick-item" onclick="location.href='mypage.html#history'">
            <i class="bi bi-clock-history"></i>히스토리
        </div>
    </div> <!-- ✅ quick-menu 닫기 -->

    <!-- 배너 캐러셀 -->
    <div id="promoCarousel" class="carousel slide px-3" data-bs-ride="carousel">
        <div class="carousel-inner rounded-3 overflow-hidden">
            <div class="carousel-item active"><img src="https://placehold.co/800x300" class="d-block w-100"
                    alt="할인 이벤트"></div>
            <div class="carousel-item"><img src="https://placehold.co/800x300" class="d-block w-100" alt="정기권 안내"></div>
        </div>
    </div>

    <!-- 배지 메뉴 -->
    <div class="badges">
        <div class="badge-item">최대 5만원 쿠폰</div>
        <div class="badge-item">이번달 쿠폰팩</div>
        <div class="badge-item">카푸 드로우</div>
        <div class="badge-item">이벤트 더보기</div>
    </div>

    <!-- 세차 꿀팁 카드 -->
    <div class="container mt-3">
        <h5 class="fw-bold mb-3">카푸의 차량관리 꿀팁</h5>
        <div class="row g-3">
            <div class="col-6 col-md-4">
                <div class="card card-tip"><img src="https://placehold.co/400x250" class="card-img-top">
                    <div class="card-body">
                        <p class="card-text">비 오는 날 세차가 좋은 이유</p>
                    </div>
                </div>
            </div>
            <div class="col-6 col-md-4">
                <div class="card card-tip"><img src="https://placehold.co/400x250" class="card-img-top">
                    <div class="card-body">
                        <p class="card-text">타이어 광택 관리 팁</p>
                    </div>
                </div>
            </div>
            <div class="col-6 col-md-4">
                <div class="card card-tip"><img src="https://placehold.co/400x250" class="card-img-top">
                    <div class="card-body">
                        <p class="card-text">실내 청소 꿀팁</p>
                    </div>
                </div>
            </div>
            <div class="col-6 col-md-4">
                <div class="card card-tip"><img src="https://placehold.co/400x250" class="card-img-top">
                    <div class="card-body">
                        <p class="card-text">겨울철 세차 주의사항</p>
                    </div>
                </div>
            </div>
            <div class="col-6 col-md-4">
                <div class="card card-tip"><img src="https://placehold.co/400x250" class="card-img-top">
                    <div class="card-body">
                        <p class="card-text">여름철 차량 관리법</p>
                    </div>
                </div>
            </div>
            <div class="col-6 col-md-4">
                <div class="card card-tip"><img src="https://placehold.co/400x250" class="card-img-top">
                    <div class="card-body">
                        <p class="card-text">세차 후 왁스 관리</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="text-center mt-3"><button class="btn btn-outline-primary btn-sm">더보기</button></div>
    </div>

    <!-- 세차상품 -->
    <div class="container mt-4">
        <h5 class="fw-bold mb-3">세차 상품권</h5>
        <div class="row">
            <div class="col-12 col-md-4">
                <div class="card product-card">
                    <div class="card-body text-center">
                        <h6 class="fw-bold">일반 세차</h6>
                        <p>1회 외부 세차</p>
                        <p class="fw-bold text-primary">25,000원~</p>
                        <button class="btn btn-primary btn-sm">예약하기</button>
                    </div>
                </div>
            </div>
            <div class="col-12 col-md-4">
                <div class="card product-card">
                    <div class="card-body text-center">
                        <h6 class="fw-bold">정기 세차</h6>
                        <p>월 4회 / 8회 패키지</p>
                        <p class="fw-bold text-primary">35,000원~</p>
                        <button class="btn btn-primary btn-sm">예약하기</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 푸터 -->
    <div class="footer">
        <p>© 2025 CARPOOOO. All rights reserved.</p>
        <p>고객센터: 010-1234-5678 | info@carpoo.com</p>
        <p>사업자등록번호: 123-45-67890</p>
    </div>

    <!-- 하단 탭바 -->
    <div class="tabbar">
        <div><i class="bi bi-search"></i>검색</div>
        <div><i class="bi bi-calendar-check"></i>예약</div>
        <div class="active"><i class="bi bi-house-door-fill"></i>홈</div>
        <div><i class="bi bi-heart-fill"></i>찜</div>
        <div onclick="location.href='mypage.html'"><i class="bi bi-person-circle"></i>마이</div>
    </div>


    <script>
        function goMyCar() {
            const currentUser = JSON.parse(localStorage.getItem("currentUser"));

            if (!currentUser) {
                alert("로그인 후 이용 가능합니다.");
                window.location.href = "login.html";
                return;
            }

            if (!currentUser.cars || currentUser.cars.length === 0) {
                // 차량 등록 페이지
                window.location.href = "car-register.html";
            } else {
                // 등록된 차량이 있다면 프로필 페이지로 이동
                window.location.href = "car-profile.html";
            }
        }
        // 사이드메뉴 열고 닫기
        const menuBtn = document.getElementById("menuBtn");
        const sideMenu = document.getElementById("sideMenu");
        const overlay = document.getElementById("overlay");

        menuBtn.addEventListener("click", () => {
            sideMenu.classList.toggle("active");
            overlay.classList.toggle("active");
        });

        overlay.addEventListener("click", () => {
            sideMenu.classList.remove("active");
            overlay.classList.remove("active");
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>