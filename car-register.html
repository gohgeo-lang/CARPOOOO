<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CARPOOOO - ì°¨ëŸ‰ ë“±ë¡</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link href="style.css" rel="stylesheet">
</head>

<body>

    <!-- í—¤ë” -->
    <div class="header">
        <h4 class="fw-bold">ì°¨ëŸ‰ ë“±ë¡</h4>
        <p class="mb-0">ë‚´ ì°¨ë¥¼ ë“±ë¡í•´ë³´ì„¸ìš” ğŸš—</p>
    </div>

    <div class="container mt-4" style="max-width:500px;">
        <div class="card p-4">
            <form id="carForm">
                <div class="mb-3">
                    <label class="form-label">ì°¨ëŸ‰ ë²ˆí˜¸íŒ</label>
                    <input type="text" class="form-control" id="carNumber" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">ì œì¡°ì‚¬</label>
                    <select class="form-select" id="carCompany" required>
                        <option value="">ì œì¡°ì‚¬ ì„ íƒ</option>
                        <option value="í˜„ëŒ€">í˜„ëŒ€</option>
                        <option value="ê¸°ì•„">ê¸°ì•„</option>
                        <option value="BMW">BMW</option>
                        <option value="BENZ">BENZ</option>
                    </select>
                </div>
                <div class="mb-3">
                    <label class="form-label">ëª¨ë¸</label>
                    <input type="text" class="form-control" id="carModel" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">ì°¨ëŸ‰ í¬ê¸°</label>
                    <select class="form-select" id="carSize" required>
                        <option value="">í¬ê¸° ì„ íƒ</option>
                        <option value="ê²½í˜•">ê²½í˜•</option>
                        <option value="ì¤€ì¤‘í˜•">ì¤€ì¤‘í˜•</option>
                        <option value="ì¤€ëŒ€í˜•">ì¤€ëŒ€í˜•</option>
                        <option value="ëŒ€í˜•">ëŒ€í˜•</option>
                        <option value="SUV">SUV</option>
                        <option value="RV">RV</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary w-100">ì°¨ëŸ‰ ë“±ë¡í•˜ê¸°</button>
            </form>
        </div>
    </div>

    <div class="footer">
        <p>Â© 2025 CARPOOOO. All rights reserved.</p>
    </div>

    <!-- í•˜ë‹¨ íƒ­ë°” -->
    <div class="tabbar">
        <div onclick="location.href='search.html'"><i class="bi bi-search"></i>ê²€ìƒ‰</div>
        <div onclick="location.href='booking.html'"><i class="bi bi-calendar-check"></i>ì˜ˆì•½</div>
        <div onclick="location.href='index.html'"><i class="bi bi-house-door-fill"></i>í™ˆ</div>
        <div onclick="location.href='wishlist.html'"><i class="bi bi-heart-fill"></i>ì°œ</div>
        <div class="active" onclick="location.href='mypage.html'"><i class="bi bi-person-circle"></i>ë§ˆì´</div>
    </div>


    <script>
        const currentUser = JSON.parse(localStorage.getItem("currentUser"));
        if (!currentUser) {
            alert("ë¡œê·¸ì¸ í›„ ì´ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.");
            window.location.href = "login.html";
        }

        document.getElementById("carForm").addEventListener("submit", function (e) {
            e.preventDefault();

            const carNumber = document.getElementById("carNumber").value.trim();
            const carCompany = document.getElementById("carCompany").value;
            const carModel = document.getElementById("carModel").value.trim();
            const carSize = document.getElementById("carSize").value;

            if (!carNumber || !carCompany || !carModel || !carSize) {
                alert("ëª¨ë“  í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                return;
            }

            // currentUserì— cars ë°°ì—´ì´ ì—†ìœ¼ë©´ ìƒì„±
            if (!currentUser.cars) currentUser.cars = [];

            // ì°¨ëŸ‰ ì¶”ê°€
            currentUser.cars.push({ carNumber, carCompany, carModel, carSize });

            // localStorage ê°±ì‹ 
            let users = JSON.parse(localStorage.getItem("users")) || [];
            users = users.map(u => u.phone === currentUser.phone ? currentUser : u);
            localStorage.setItem("users", JSON.stringify(users));
            localStorage.setItem("currentUser", JSON.stringify(currentUser));

            alert("ì°¨ëŸ‰ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!");
            window.location.href = "mypage.html#mycar";
        });
    </script>

</body>

</html>