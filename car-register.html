<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CARPOOOO - 차량 등록</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link href="style.css" rel="stylesheet">
</head>

<body>

    <!-- 헤더 -->
    <div class="header">
        <h4 class="fw-bold">차량 등록</h4>
        <p class="mb-0">내 차를 등록해보세요 🚗</p>
    </div>

    <div class="container mt-4" style="max-width:500px;">
        <div class="card p-4">
            <form id="carForm">
                <div class="mb-3">
                    <label class="form-label">차량 번호판</label>
                    <input type="text" class="form-control" id="carNumber" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">제조사</label>
                    <select class="form-select" id="carCompany" required>
                        <option value="">제조사 선택</option>
                        <option value="현대">현대</option>
                        <option value="기아">기아</option>
                        <option value="BMW">BMW</option>
                        <option value="BENZ">BENZ</option>
                    </select>
                </div>
                <div class="mb-3">
                    <label class="form-label">모델</label>
                    <input type="text" class="form-control" id="carModel" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">차량 크기</label>
                    <select class="form-select" id="carSize" required>
                        <option value="">크기 선택</option>
                        <option value="경형">경형</option>
                        <option value="준중형">준중형</option>
                        <option value="준대형">준대형</option>
                        <option value="대형">대형</option>
                        <option value="SUV">SUV</option>
                        <option value="RV">RV</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary w-100">차량 등록하기</button>
            </form>
        </div>
    </div>

    <div class="footer">
        <p>© 2025 CARPOOOO. All rights reserved.</p>
    </div>

    <!-- 하단 탭바 -->
    <div class="tabbar">
        <div onclick="location.href='search.html'"><i class="bi bi-search"></i>검색</div>
        <div onclick="location.href='booking.html'"><i class="bi bi-calendar-check"></i>예약</div>
        <div onclick="location.href='index.html'"><i class="bi bi-house-door-fill"></i>홈</div>
        <div onclick="location.href='wishlist.html'"><i class="bi bi-heart-fill"></i>찜</div>
        <div class="active" onclick="location.href='mypage.html'"><i class="bi bi-person-circle"></i>마이</div>
    </div>


    <script>
        const currentUser = JSON.parse(localStorage.getItem("currentUser"));
        if (!currentUser) {
            alert("로그인 후 이용 가능합니다.");
            window.location.href = "login.html";
        }

        document.getElementById("carForm").addEventListener("submit", function (e) {
            e.preventDefault();

            const carNumber = document.getElementById("carNumber").value.trim();
            const carCompany = document.getElementById("carCompany").value;
            const carModel = document.getElementById("carModel").value.trim();
            const carSize = document.getElementById("carSize").value;

            if (!carNumber || !carCompany || !carModel || !carSize) {
                alert("모든 항목을 입력해주세요.");
                return;
            }

            // currentUser에 cars 배열이 없으면 생성
            if (!currentUser.cars) currentUser.cars = [];

            // 차량 추가
            currentUser.cars.push({ carNumber, carCompany, carModel, carSize });

            // localStorage 갱신
            let users = JSON.parse(localStorage.getItem("users")) || [];
            users = users.map(u => u.phone === currentUser.phone ? currentUser : u);
            localStorage.setItem("users", JSON.stringify(users));
            localStorage.setItem("currentUser", JSON.stringify(currentUser));

            alert("차량이 등록되었습니다!");
            window.location.href = "mypage.html#mycar";
        });
    </script>

</body>

</html>